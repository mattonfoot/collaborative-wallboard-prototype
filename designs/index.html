<!DOCTYPE HTML>
<html>
  <head>
    <title>VUU.SE UI Prototype</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Bootstrap
    <link href="./css/vendor/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="./css/vendor/bootstrap-theme.min.css" rel="stylesheet" media="screen">
    -->
  </head>
  <body>
    <div id="container" style="border: 1px dashed #ccc; display: inline-block;"></div>
    
    <script src="./lib/vendor/kinetic-v4.6.0.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    
    <script src="./lib/vuu.se.eventqueue.js"></script>
    
    <script src="./lib/shapes/vuu.se.canvas.chrome.js"></script>
    <script src="./lib/shapes/vuu.se.canvas.shelf.js"></script>
    <script src="./lib/shapes/vuu.se.canvas.button.js"></script>
    <script src="./lib/shapes/vuu.se.canvas.board.js"></script>
    <script src="./lib/shapes/vuu.se.canvas.card.js"></script>
    
    <script src="./lib/vuu.se.wall.js"></script>
    <script src="./lib/vuu.se.board.js"></script>
    <!--
    <script src="./lib/vuu.se.region.js"></script>
    -->
    <script src="./lib/vuu.se.card.js"></script>
    <script src="./lib/vuu.se.pocket.js"></script>
    <!--
    <script src="./lib/commands/vuu.se.region.create.js"></script>
    -->
    <script src="./lib/commands/vuu.se.card.create.js"></script>
    <script src="./lib/commands/vuu.se.pocket.create.js"></script>
    <script src="./lib/commands/vuu.se.board.create.js"></script>
    
    <script defer="defer">
      
var config = {
  container: 'container', 
  width: 800,
  height: 600
};

// communication

var queue = new EventQueue( { debug: true } );
var socket = io.connect('http://localhost:5000');

socket.on( 'app:init', function( pockets ) { console.log( 'success', pockets ); });

socket.on( 'app:initfail', function( pockets ) { console.log( 'fail',  pockets ); });

// UI
var stage = new Kinetic.Stage( config );
new ChromeCanvas( stage );

var wall_1 = new Wall( stage, queue );
new PocketFactory( queue, socket, wall_1 );
new BoardFactory( queue, socket, wall_1 );

// controls
new ButtonCanvas( stage, '[+]', 'board:add', { x: 1, y: 1, width: 50, fontSize: 25 });
var addCardButton;
queue.on( {}, 'boardcreate:end', function() {
  if (!addCardButton) {
    addCardButton = new ButtonCanvas( stage, '[+]', 'pocket:add', { x: 1, y: 501, width: 100, fontSize: 60 });
  }
});

/*
var cardlist = [];
queue.on(cardlist, 'cardcreate:end', function( data, card ) { this.push( card ); });

cardlist.clones = [];
queue.on(cardlist, 'cardclone:end', function( data, card ) { this.clones.push( card ); });

var pocketlist = [];
queue.on(pocketlist, 'pocketcreate:end', function( data, pocket ) { this.push( pocket ); });

pocketlist.clones = [];
queue.on(pocketlist, 'pocketclone:end', function( data, pocket ) { this.clones.push( pocket ); });
*/
    </script>
  </body>
</html>